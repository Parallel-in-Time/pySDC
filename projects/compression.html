<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Compression in pySDC &#8212; pySDC 5.2.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/classic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="core package" href="../pySDC/core.html" />
    <link rel="prev" title="Solving differential algebraic equations with SDC" href="DAE.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../pySDC/core.html" title="core package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="DAE.html" title="Solving differential algebraic equations with SDC"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">pySDC 5.2.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Compression in pySDC</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="compression-in-pysdc">
<h1>Compression in pySDC<a class="headerlink" href="#compression-in-pysdc" title="Permalink to this heading">¶</a></h1>
<p>This project aims to implement compression in pySDC in whatever way proves to be useful.
It is a collaboration between Clemson University, Argonne National Laboratory and Forschungszentrum Juelich under the umbrella of <a class="reference external" href="https://jlesc.github.io">JLESC</a>.
See the project web page <a class="reference external" href="https://jlesc.github.io/projects/lossy-compress-linear-algebra/">here</a>.</p>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h2>
<p>PDE solvers provide ample opportunity for compression to improve certain aspects of the code.
See for instance <a class="reference external" href="https://doi.org/10.3390/a12090197">Sebastian Goetschel’s and Martin Weiser’s nice review</a> on the topic.</p>
<p>Due to current hardware trends, codes are often memory bound rather than compute bound, which means computational resources are perhaps more wisely spent on compression such that memory access can be reduced and more performance can be leveraged.
This applies, in particular, to distributed systems where interconnect speeds are yet slower than memory access speeds.
As PinT algorithms target large scale distributed systems because concurrency in the time direction usually comes with lower parallel efficiency than in the space direction and is hence best implemented on top of spatial parallelism, it is an ideal candidate to benefit from compression.</p>
<p>SDC, in particular, is a collocation method, which approximates the integral in time by a weighted sum of right hand side evaluations at intermediate time points (collocation nodes).
All of these need to be available in memory during the sweeps where the solutions at the collocation nodes are updated.
For PDEs, this can be substantial in size and the algorithm could benefit greatly from compressing these data.
As right hand side evaluations at individual collocation nodes are required during the sweeps, they either need to be compressed separately, or random access needs to be maintained.</p>
<p>In parallel computation based on decomposition of the domain, the interface needs to be communicated between processors.
For PinT, this interface corresponds to the solution of the time step allotted to a process, which becomes the initial conditions for the next process.
As this is a large object, communication can become expensive and compressed communication can speed this up.</p>
<p>We are also interested in compression with respect to resilience.
For instance, we introduce inexactness during lossy compression, which provides significantly greater compression factors than lossless compression, and we want to be able to answer the question of how large of an inexactness we can afford while maintaining the accuracy we desire from the final outcome.
This is interesting for algorithms detecting soft faults.
Picture SDC in an early iteration, where the solution is not yet converged and a soft fault occurs.
A resilient algorithm might trigger a costly restart which is unnecessary as the impact of the soft fault may not be noticeable in the converged solution.</p>
<p>Opportunities for compression to be useful in PDE solvers are endless.
We will see how the project progresses and update this page accordingly.</p>
</section>
<section id="methods">
<h2>Methods<a class="headerlink" href="#methods" title="Permalink to this heading">¶</a></h2>
<p>Since pySDC is a prototyping library, it provides a good playground to easily implement compression.
However, we may not be able to measure a reduction in memory footprint due to Python’s memory management.</p>
<p>For compression, we use the <a class="reference external" href="https://github.com/robertu94/libpressio">libpressio</a> library maintained by Robert Underwood at Argonne National Laboratory.
As a starting point we use the <a class="reference external" href="https://github.com/szcompressor/SZ3">SZ3</a> compressor.
We use a docker container with an installation of libpressio and pySDC working together.
See the <a class="reference external" href="https://github.com/Parallel-in-Time/pySDC/tree/master/pySDC/projects/compression/Docker">guide</a> on how to use the container.</p>
</section>
<section id="proof-of-concept">
<h2>Proof of Concept<a class="headerlink" href="#proof-of-concept" title="Permalink to this heading">¶</a></h2>
<p>For a proof of concept, we take the solution and right hand sides and compress and immediately decompress them every time they get updated during the sweeps.
While this provides no benefit, it should capture the downsides of compression.
We measure the local order of accuracy in time and verify that it increases by one with each sweep for an advection problem.
While the order is typically only maintained up to machine precision or the discretization error, we find now that accuracy now stalls at the error bound that we set for the compressor.
See below for corresponding figures, where the difference between the colored lines is the number of SDC iterations and the dashed line marks the error bound for SZ3.</p>
<a class="reference internal image-reference" href="../../data/compression_order_time_advection_d=1.00e-06_n=1_MPI=False.png"><img alt="../../data/compression_order_time_advection_d=1.00e-06_n=1_MPI=False.png" src="../../data/compression_order_time_advection_d=1.00e-06_n=1_MPI=False.png" style="width: 45%;" /></a>
<a class="reference internal image-reference" href="../../data/compression_order_time_advection_d=1.00e-06_n=1_MPI=True.png"><img alt="../../data/compression_order_time_advection_d=1.00e-06_n=1_MPI=True.png" src="../../data/compression_order_time_advection_d=1.00e-06_n=1_MPI=True.png" style="width: 45%;" /></a>
<p>It has recently been <a class="reference external" href="https://tore.tuhh.de/handle/11420/12370">demonstrated</a> that the small scale PinT algorithm Block Gauss Seidel SDC maintains the order of single step SDC, so we can repeat the same test but with multiple processors, each with their own time step to solve:</p>
<a class="reference internal image-reference" href="../../data/compression_order_time_advection_d=1.00e-06_n=4_MPI=False.png"><img alt="../../data/compression_order_time_advection_d=1.00e-06_n=4_MPI=False.png" src="../../data/compression_order_time_advection_d=1.00e-06_n=4_MPI=False.png" style="width: 45%;" /></a>
<a class="reference internal image-reference" href="../../data/compression_order_time_advection_d=1.00e-06_n=4_MPI=True.png"><img alt="../../data/compression_order_time_advection_d=1.00e-06_n=4_MPI=True.png" src="../../data/compression_order_time_advection_d=1.00e-06_n=4_MPI=True.png" style="width: 45%;" /></a>
<p>The above plots showcase that both time-serial SDC as well as time-parallel Block Gauss-Seidel SDC do not suffer from compression when the compression error bound is below other numerical errors and that both the MPI and simulated parallelism versions work.
After establishing that the downsides of compression can be controlled, it remains to apply compression in a manner that is beneficial to the algorithm.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Compression in pySDC</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#methods">Methods</a></li>
<li><a class="reference internal" href="#proof-of-concept">Proof of Concept</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="DAE.html"
                          title="previous chapter">Solving differential algebraic equations with SDC</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="../pySDC/core.html"
                          title="next chapter">core package</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/projects/compression.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../pySDC/core.html" title="core package"
             >next</a> |</li>
        <li class="right" >
          <a href="DAE.html" title="Solving differential algebraic equations with SDC"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">pySDC 5.2.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Compression in pySDC</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2023, Robert Speck.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.0.0.
    </div>
  </body>
</html>