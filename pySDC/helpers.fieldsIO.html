<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>helpers.fieldsIO module &#8212; pySDC 5.6 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/classic.css?v=2bf1fcf8" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=c40552b6" />
    
    <script src="../_static/documentation_options.js?v=81710850"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="helpers.firedrake_ensemble_communicator module" href="helpers.firedrake_ensemble_communicator.html" />
    <link rel="prev" title="helpers.blocks module" href="helpers.blocks.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="helpers.firedrake_ensemble_communicator.html" title="helpers.firedrake_ensemble_communicator module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="helpers.blocks.html" title="helpers.blocks module"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">pySDC 5.6 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="helpers.html" accesskey="U">helpers package</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">helpers.fieldsIO module</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="module-helpers.fieldsIO">
<span id="helpers-fieldsio-module"></span><h1>helpers.fieldsIO module<a class="headerlink" href="#module-helpers.fieldsIO" title="Link to this heading">¶</a></h1>
<p>Generic utility class to write and read cartesian grid field solutions into binary files.
It implements the base file handler class <a class="reference internal" href="#helpers.fieldsIO.FieldsIO" title="helpers.fieldsIO.FieldsIO"><code class="xref py py-class docutils literal notranslate"><span class="pre">FieldsIO</span></code></a>, that is specialized into :</p>
<ul class="simple">
<li><p><a class="reference internal" href="#helpers.fieldsIO.Scalar" title="helpers.fieldsIO.Scalar"><code class="xref py py-class docutils literal notranslate"><span class="pre">Scalar</span></code></a> : for 0D fields (scalar) with a given number of variables</p></li>
<li><p><a class="reference internal" href="#helpers.fieldsIO.Rectilinear" title="helpers.fieldsIO.Rectilinear"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rectilinear</span></code></a> : for fields on N-dimensional rectilinear grids</p></li>
</ul>
<p>While each file handler need to be setup with specific parameters (grid, …),
each written file can be read using the same interface implemented in the
base abstract class.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pySDC.helpers.fieldsIO</span><span class="w"> </span><span class="kn">import</span> <span class="n">Rectilinear</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Write some fields in files</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">128</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">64</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fOut</span> <span class="o">=</span> <span class="n">Rectilinear</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">,</span> <span class="s2">&quot;file.pysdc&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fOut</span><span class="o">.</span><span class="n">setHeader</span><span class="p">(</span><span class="n">nVar</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fOut</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">times</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xGrid</span><span class="p">,</span> <span class="n">yGrid</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">indexing</span><span class="o">=</span><span class="s2">&quot;ij&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span><span class="o">*</span><span class="n">xGrid</span><span class="o">*</span><span class="n">yGrid</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># u0 has shape [2, nX, nY]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">times</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="n">fOut</span><span class="o">.</span><span class="n">addField</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">t</span><span class="o">*</span><span class="n">u0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Read the file using the generic interface</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pySDC.helpers.fieldsIO</span><span class="w"> </span><span class="kn">import</span> <span class="n">FieldsIO</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fIn</span> <span class="o">=</span> <span class="n">FieldsIO</span><span class="o">.</span><span class="n">fromFile</span><span class="p">(</span><span class="s2">&quot;file.pysdc&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">times</span> <span class="o">=</span> <span class="n">fIn</span><span class="o">.</span><span class="n">times</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">times</span><span class="p">)</span> <span class="o">==</span> <span class="n">fIn</span><span class="o">.</span><span class="n">nFields</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tEnd</span><span class="p">,</span> <span class="n">uEnd</span> <span class="o">=</span> <span class="n">fIn</span><span class="o">.</span><span class="n">readField</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">tEnd</span> <span class="o">==</span> <span class="n">times</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p class="rubric">Notes</p>
<p>🚀 <a class="reference internal" href="#helpers.fieldsIO.Rectilinear" title="helpers.fieldsIO.Rectilinear"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rectilinear</span></code></a> is compatible with a MPI-based cartesian decomposition.
See <code class="xref py py-class docutils literal notranslate"><span class="pre">pySDC.helpers.fieldsIO.writeFields_MPI</span></code> for an illustrative example.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>To use MPI collective writing, you need to call first the class methods <code class="xref py py-class docutils literal notranslate"><span class="pre">Rectilinear.initMPI</span></code> (cf their docstring).
Also, <cite>Rectilinear.setHeader</cite> <strong>must be given the global grids coordinates</strong>, whether the code is run in parallel or not.</p>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="helpers.fieldsIO.FieldsIO">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">FieldsIO</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dtype</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fileName</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#FieldsIO"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.FieldsIO" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Abstract IO file handler</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="helpers.fieldsIO.FieldsIO.ALLOW_OVERWRITE">
<span class="sig-name descname"><span class="pre">ALLOW_OVERWRITE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#helpers.fieldsIO.FieldsIO.ALLOW_OVERWRITE" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="helpers.fieldsIO.FieldsIO.STRUCTS">
<span class="sig-name descname"><span class="pre">STRUCTS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{0:</span> <span class="pre">&lt;class</span> <span class="pre">'helpers.fieldsIO.Scalar'&gt;,</span> <span class="pre">1:</span> <span class="pre">&lt;class</span> <span class="pre">'helpers.fieldsIO.Rectilinear'&gt;}</span></em><a class="headerlink" href="#helpers.fieldsIO.FieldsIO.STRUCTS" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="helpers.fieldsIO.FieldsIO.addField">
<span class="sig-name descname"><span class="pre">addField</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#FieldsIO.addField"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.FieldsIO.addField" title="Link to this definition">¶</a></dt>
<dd><p>Append one field solution at the end of the file with one given time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time</strong> (<em>float-like</em>) – The associated time of the field solution.</p></li>
<li><p><strong>field</strong> (<em>np.ndarray</em>) – The field values.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="helpers.fieldsIO.FieldsIO.fSize">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fSize</span></span><a class="headerlink" href="#helpers.fieldsIO.FieldsIO.fSize" title="Link to this definition">¶</a></dt>
<dd><p>Full size of a field (in bytes)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="helpers.fieldsIO.FieldsIO.fileSize">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fileSize</span></span><a class="headerlink" href="#helpers.fieldsIO.FieldsIO.fileSize" title="Link to this definition">¶</a></dt>
<dd><p>Current size of the file (in bytes)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="helpers.fieldsIO.FieldsIO.formatIndex">
<span class="sig-name descname"><span class="pre">formatIndex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idx</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#FieldsIO.formatIndex"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.FieldsIO.formatIndex" title="Link to this definition">¶</a></dt>
<dd><p>Utility method to format a fields index to a positional integer (negative starts from last field index, like python lists)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="helpers.fieldsIO.FieldsIO.fromFile">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fromFile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fileName</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#FieldsIO.fromFile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.FieldsIO.fromFile" title="Link to this definition">¶</a></dt>
<dd><p>Read a file storing fields, and return the <cite>FieldsIO</cite> of the appropriate
field type (structure).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fileName</strong> (<em>str</em>) – Name of the binary file.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>fieldsIO</strong> – The specialized <cite>FieldsIO</cite> adapted to the file.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#helpers.fieldsIO.FieldsIO" title="helpers.fieldsIO.FieldsIO"><code class="xref py py-class docutils literal notranslate"><span class="pre">FieldsIO</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="helpers.fieldsIO.FieldsIO.hBase">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hBase</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ndarray</span></em><a class="headerlink" href="#helpers.fieldsIO.FieldsIO.hBase" title="Link to this definition">¶</a></dt>
<dd><p>Base header into numpy array format</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="helpers.fieldsIO.FieldsIO.hInfos">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hInfos</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#helpers.fieldsIO.FieldsIO.hInfos" title="Link to this definition">¶</a></dt>
<dd><p>(Abstract) Array representing the grid structure to be written in the binary file.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="helpers.fieldsIO.FieldsIO.hSize">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hSize</span></span><a class="headerlink" href="#helpers.fieldsIO.FieldsIO.hSize" title="Link to this definition">¶</a></dt>
<dd><p>Size of the full header (in bytes)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="helpers.fieldsIO.FieldsIO.initialize">
<span class="sig-name descname"><span class="pre">initialize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#FieldsIO.initialize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.FieldsIO.initialize" title="Link to this definition">¶</a></dt>
<dd><p>Initialize the file handler : create the file with header, removing any existing file with the same name</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="helpers.fieldsIO.FieldsIO.itemSize">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">itemSize</span></span><a class="headerlink" href="#helpers.fieldsIO.FieldsIO.itemSize" title="Link to this definition">¶</a></dt>
<dd><p>Size of one field value (in bytes)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="helpers.fieldsIO.FieldsIO.nFields">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">nFields</span></span><a class="headerlink" href="#helpers.fieldsIO.FieldsIO.nFields" title="Link to this definition">¶</a></dt>
<dd><p>Number of fields currently stored in the binary file</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="helpers.fieldsIO.FieldsIO.readField">
<span class="sig-name descname"><span class="pre">readField</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idx</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#FieldsIO.readField"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.FieldsIO.readField" title="Link to this definition">¶</a></dt>
<dd><p>Read one field stored in the binary file, corresponding to the given
time index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>idx</strong> (<em>int</em>) – Positional index of the field.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>t</strong> (<em>float</em>) – Stored time for this field.</p></li>
<li><p><strong>field</strong> (<em>np.ndarray</em>) – Read fields in a numpy array.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="helpers.fieldsIO.FieldsIO.readHeader">
<span class="sig-name descname"><span class="pre">readHeader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#FieldsIO.readHeader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.FieldsIO.readHeader" title="Link to this definition">¶</a></dt>
<dd><p>(Abstract) Read the header from the file storing the fields.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>f</strong> (<cite>_io.TextIOWrapper</cite>) – File to read the header from.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="helpers.fieldsIO.FieldsIO.register">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">register</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sID</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#FieldsIO.register"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.FieldsIO.register" title="Link to this definition">¶</a></dt>
<dd><p>Decorator used to register a new class FieldsIO specialized class</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>sID</strong> (<em>int</em>) – Unique identifyer for the file, used in the binary file.
Since it’s encoded on a 8-bytes signed integer,
it must be between -128 and 127</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># New specialized FieldsIO class</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@FieldsIO</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">sID</span><span class="o">=</span><span class="mi">31</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">HexaMesh2D</span><span class="p">(</span><span class="n">FieldsIO</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">pass</span> <span class="c1"># ... implementation</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="helpers.fieldsIO.FieldsIO.reshape">
<span class="sig-name descname"><span class="pre">reshape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">field</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#FieldsIO.reshape"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.FieldsIO.reshape" title="Link to this definition">¶</a></dt>
<dd><p>Eventually reshape the field to correspond to the grid structure</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="helpers.fieldsIO.FieldsIO.sID">
<span class="sig-name descname"><span class="pre">sID</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#helpers.fieldsIO.FieldsIO.sID" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="helpers.fieldsIO.FieldsIO.setHeader">
<span class="sig-name descname"><span class="pre">setHeader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#FieldsIO.setHeader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.FieldsIO.setHeader" title="Link to this definition">¶</a></dt>
<dd><p>(Abstract) Set the header before creating a new file to store the fields</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="helpers.fieldsIO.FieldsIO.tSize">
<span class="sig-name descname"><span class="pre">tSize</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">8</span></em><a class="headerlink" href="#helpers.fieldsIO.FieldsIO.tSize" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="helpers.fieldsIO.FieldsIO.time">
<span class="sig-name descname"><span class="pre">time</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idx</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#FieldsIO.time"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.FieldsIO.time" title="Link to this definition">¶</a></dt>
<dd><p>Time stored at a given field index</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="helpers.fieldsIO.FieldsIO.times">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">times</span></span><a class="headerlink" href="#helpers.fieldsIO.FieldsIO.times" title="Link to this definition">¶</a></dt>
<dd><p>Vector of all times stored in the binary file</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="helpers.fieldsIO.Rectilinear">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Rectilinear</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dtype</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fileName</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#Rectilinear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.Rectilinear" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#helpers.fieldsIO.Scalar" title="helpers.fieldsIO.Scalar"><code class="xref py py-class docutils literal notranslate"><span class="pre">Scalar</span></code></a></p>
<p>FieldsIO handler storing a given number of scalar variables on a N-dimensional rectilinear grid</p>
<dl class="py method">
<dt class="sig sig-object py" id="helpers.fieldsIO.Rectilinear.MPI_FILE_CLOSE">
<span class="sig-name descname"><span class="pre">MPI_FILE_CLOSE</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#Rectilinear.MPI_FILE_CLOSE"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.Rectilinear.MPI_FILE_CLOSE" title="Link to this definition">¶</a></dt>
<dd><p>Close the binary file in MPI mode</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="helpers.fieldsIO.Rectilinear.MPI_FILE_OPEN">
<span class="sig-name descname"><span class="pre">MPI_FILE_OPEN</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#Rectilinear.MPI_FILE_OPEN"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.Rectilinear.MPI_FILE_OPEN" title="Link to this definition">¶</a></dt>
<dd><p>Open the binary file in MPI mode</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="helpers.fieldsIO.Rectilinear.MPI_ON">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MPI_ON</span></span><a class="headerlink" href="#helpers.fieldsIO.Rectilinear.MPI_ON" title="Link to this definition">¶</a></dt>
<dd><p>Wether or not MPI is activated</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="helpers.fieldsIO.Rectilinear.MPI_READ_AT_ALL">
<span class="sig-name descname"><span class="pre">MPI_READ_AT_ALL</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">offset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#Rectilinear.MPI_READ_AT_ALL"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.Rectilinear.MPI_READ_AT_ALL" title="Link to this definition">¶</a></dt>
<dd><p>Read data from the binary file in MPI mode, with a given offset
<strong>relative to the beginning of the file</strong>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>offset</strong> (<em>int</em>) – Offset to read at, relative to the beginning of the file, in bytes.</p></li>
<li><p><strong>data</strong> (<em>np.ndarray</em>) – Array on which to read the data from the binary file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="helpers.fieldsIO.Rectilinear.MPI_ROOT">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MPI_ROOT</span></span><a class="headerlink" href="#helpers.fieldsIO.Rectilinear.MPI_ROOT" title="Link to this definition">¶</a></dt>
<dd><p>Wether or not the process is MPI Root</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="helpers.fieldsIO.Rectilinear.MPI_WRITE">
<span class="sig-name descname"><span class="pre">MPI_WRITE</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#Rectilinear.MPI_WRITE"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.Rectilinear.MPI_WRITE" title="Link to this definition">¶</a></dt>
<dd><p>Write data (np.ndarray) in the binary file in MPI mode, at the current file cursor position.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="helpers.fieldsIO.Rectilinear.MPI_WRITE_AT_ALL">
<span class="sig-name descname"><span class="pre">MPI_WRITE_AT_ALL</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">offset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#Rectilinear.MPI_WRITE_AT_ALL"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.Rectilinear.MPI_WRITE_AT_ALL" title="Link to this definition">¶</a></dt>
<dd><p>Write data in the binary file in MPI mode, with a given offset
<strong>relative to the beginning of the file</strong>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>offset</strong> (<em>int</em>) – Offset to write at, relative to the beginning of the file, in bytes.</p></li>
<li><p><strong>data</strong> (<em>np.ndarray</em>) – Data to be written in the binary file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="helpers.fieldsIO.Rectilinear.addField">
<span class="sig-name descname"><span class="pre">addField</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#Rectilinear.addField"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.Rectilinear.addField" title="Link to this definition">¶</a></dt>
<dd><p>Append one field solution at the end of the file with one given time,
possibly using MPI.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time</strong> (<em>float-like</em>) – The associated time of the field solution.</p></li>
<li><p><strong>field</strong> (<em>np.ndarray</em>) – The (local) field values.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If a MPI decomposition is used, field <strong>must be</strong> the local field values.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="helpers.fieldsIO.Rectilinear.comm">
<span class="sig-name descname"><span class="pre">comm</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">mpi4py.MPI.Intracomm</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#helpers.fieldsIO.Rectilinear.comm" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="helpers.fieldsIO.Rectilinear.dim">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">dim</span></span><a class="headerlink" href="#helpers.fieldsIO.Rectilinear.dim" title="Link to this definition">¶</a></dt>
<dd><p>Number of grid dimensions</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="helpers.fieldsIO.Rectilinear.gridSizes">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">gridSizes</span></span><a class="headerlink" href="#helpers.fieldsIO.Rectilinear.gridSizes" title="Link to this definition">¶</a></dt>
<dd><p>Number of points in y direction</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="helpers.fieldsIO.Rectilinear.hInfos">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hInfos</span></span><a class="headerlink" href="#helpers.fieldsIO.Rectilinear.hInfos" title="Link to this definition">¶</a></dt>
<dd><p>Array representing the grid structure to be written in the binary file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="helpers.fieldsIO.Rectilinear.iPos">
<span class="sig-name descname"><span class="pre">iPos</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iVar</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iX</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#Rectilinear.iPos"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.Rectilinear.iPos" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="helpers.fieldsIO.Rectilinear.initialize">
<span class="sig-name descname"><span class="pre">initialize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#Rectilinear.initialize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.Rectilinear.initialize" title="Link to this definition">¶</a></dt>
<dd><p>Initialize the binary file (write header) in MPI mode</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="helpers.fieldsIO.Rectilinear.nCollectiveIO">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">nCollectiveIO</span></span><a class="headerlink" href="#helpers.fieldsIO.Rectilinear.nCollectiveIO" title="Link to this definition">¶</a></dt>
<dd><p>Number of collective IO operations over all processes, when reading or writing a field.</p>
<section id="returns">
<h2>Returns:<a class="headerlink" href="#returns" title="Link to this heading">¶</a></h2>
<p>int: Number of collective IO accesses</p>
</section>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="helpers.fieldsIO.Rectilinear.nDoF">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">nDoF</span></span><a class="headerlink" href="#helpers.fieldsIO.Rectilinear.nDoF" title="Link to this definition">¶</a></dt>
<dd><p>Number of degrees of freedom for one variable</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="helpers.fieldsIO.Rectilinear.readField">
<span class="sig-name descname"><span class="pre">readField</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idx</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#Rectilinear.readField"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.Rectilinear.readField" title="Link to this definition">¶</a></dt>
<dd><p>Read one field stored in the binary file, corresponding to the given
time index, using MPI in the eventuality of space parallel decomposition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>idx</strong> (<em>int</em>) – Positional index of the field.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>t</strong> (<em>float</em>) – Stored time for this field.</p></li>
<li><p><strong>field</strong> (<em>np.ndarray</em>) – Read (local) fields in a numpy array.</p></li>
</ul>
</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If a MPI decomposition is used, it reads and returns the local fields values only.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="helpers.fieldsIO.Rectilinear.readHeader">
<span class="sig-name descname"><span class="pre">readHeader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#Rectilinear.readHeader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.Rectilinear.readHeader" title="Link to this definition">¶</a></dt>
<dd><p>Read the header from the binary file storing the fields.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>f</strong> (<cite>_io.TextIOWrapper</cite>) – File to read the header from.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="helpers.fieldsIO.Rectilinear.reshape">
<span class="sig-name descname"><span class="pre">reshape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fields</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#Rectilinear.reshape"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.Rectilinear.reshape" title="Link to this definition">¶</a></dt>
<dd><p>Reshape the fields to a N-d array (inplace operation)</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="helpers.fieldsIO.Rectilinear.sID">
<span class="sig-name descname"><span class="pre">sID</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#helpers.fieldsIO.Rectilinear.sID" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="helpers.fieldsIO.Rectilinear.setHeader">
<span class="sig-name descname"><span class="pre">setHeader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nVar</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coords</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#Rectilinear.setHeader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.Rectilinear.setHeader" title="Link to this definition">¶</a></dt>
<dd><p>Set the descriptive grid structure to be stored in the file header.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nVar</strong> (<em>int</em>) – Number of 1D variables stored.</p></li>
<li><p><strong>coords</strong> (<em>np.1darray</em><em> or </em><em>list</em><em>[</em><em>np.1darray</em><em>]</em>) – The grid coordinates in each dimensions.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When used in MPI decomposition mode, all coordinate <strong>must</strong> be the global grid.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="helpers.fieldsIO.Rectilinear.setupCoords">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">setupCoords</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">coords</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#Rectilinear.setupCoords"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.Rectilinear.setupCoords" title="Link to this definition">¶</a></dt>
<dd><p>Utility function to setup grids in multiple dimensions, given the keyword arguments</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="helpers.fieldsIO.Rectilinear.setupMPI">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">setupMPI</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">comm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">mpi4py.MPI.Intracomm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iLoc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nLoc</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#Rectilinear.setupMPI"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.Rectilinear.setupMPI" title="Link to this definition">¶</a></dt>
<dd><p>Setup the MPI mode for the files IO, considering a decomposition
of the 1D grid into contiguous subintervals.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>comm</strong> (<em>MPI.Intracomm</em>) – The space decomposition communicator.</p></li>
<li><p><strong>iLoc</strong> (<em>list</em><em>[</em><em>int</em><em>]</em>) – Starting index of the local sub-domain in the global coordinates.</p></li>
<li><p><strong>nLoc</strong> (<em>list</em><em>[</em><em>int</em><em>]</em>) – Number of points in the local sub-domain.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="helpers.fieldsIO.Rectilinear.toVTR">
<span class="sig-name descname"><span class="pre">toVTR</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">baseName</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">varNames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idxFormat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'{:06d}'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#Rectilinear.toVTR"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.Rectilinear.toVTR" title="Link to this definition">¶</a></dt>
<dd><p>Convert all 3D fields stored in binary format (FieldsIO) into a list
of VTR files, that can be read later with Paraview or equivalent to
make videos.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>baseName</strong> (<em>str</em>) – Base name of the VTR file.</p></li>
<li><p><strong>varNames</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – Variable names of the fields.</p></li>
<li><p><strong>idxFormat</strong> (<em>str</em><em>, </em><em>optional</em>) – Formatting string for the index of the VTR file.
The default is “{:06d}”.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Suppose the FieldsIO object is already written into outputs.pysdc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pySDC.utils.fieldsIO</span><span class="w"> </span><span class="kn">import</span> <span class="n">Rectilinear</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="s2">&quot;vtrFiles&quot;</span><span class="p">)</span>  <span class="c1"># to store all VTR files into a subfolder</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Rectilinear</span><span class="o">.</span><span class="n">fromFile</span><span class="p">(</span><span class="s2">&quot;outputs.pysdc&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">toVTR</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="n">baseName</span><span class="o">=</span><span class="s2">&quot;vtrFiles/field&quot;</span><span class="p">,</span> <span class="n">varNames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;u&quot;</span><span class="p">,</span> <span class="s2">&quot;v&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="s2">&quot;T&quot;</span><span class="p">,</span> <span class="s2">&quot;p&quot;</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="helpers.fieldsIO.Scalar">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Scalar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dtype</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fileName</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#Scalar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.Scalar" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#helpers.fieldsIO.FieldsIO" title="helpers.fieldsIO.FieldsIO"><code class="xref py py-class docutils literal notranslate"><span class="pre">FieldsIO</span></code></a></p>
<p>FieldsIO handler storing a given number of scalar</p>
<dl class="py property">
<dt class="sig sig-object py" id="helpers.fieldsIO.Scalar.hInfos">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hInfos</span></span><a class="headerlink" href="#helpers.fieldsIO.Scalar.hInfos" title="Link to this definition">¶</a></dt>
<dd><p>Array representing the grid structure to be written in the binary file.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="helpers.fieldsIO.Scalar.nVar">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">nVar</span></span><a class="headerlink" href="#helpers.fieldsIO.Scalar.nVar" title="Link to this definition">¶</a></dt>
<dd><p>Number of variables in a fields, as described in the header</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="helpers.fieldsIO.Scalar.readHeader">
<span class="sig-name descname"><span class="pre">readHeader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#Scalar.readHeader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.Scalar.readHeader" title="Link to this definition">¶</a></dt>
<dd><p>Read the header from the binary file storing the fields.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>f</strong> (<cite>_io.TextIOWrapper</cite>) – File to read the header from.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="helpers.fieldsIO.Scalar.sID">
<span class="sig-name descname"><span class="pre">sID</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#helpers.fieldsIO.Scalar.sID" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="helpers.fieldsIO.Scalar.setHeader">
<span class="sig-name descname"><span class="pre">setHeader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nVar</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#Scalar.setHeader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.Scalar.setHeader" title="Link to this definition">¶</a></dt>
<dd><p>Set the descriptive grid structure to be stored in the file header.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>nVar</strong> (<em>int</em>) – Number of scalar variable stored.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="helpers.fieldsIO.compareFields_MPI">
<span class="sig-name descname"><span class="pre">compareFields_MPI</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fileName</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nSteps</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#compareFields_MPI"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.compareFields_MPI" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="helpers.fieldsIO.initGrid">
<span class="sig-name descname"><span class="pre">initGrid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nVar</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gridSizes</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#initGrid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.initGrid" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="helpers.fieldsIO.writeFields_MPI">
<span class="sig-name descname"><span class="pre">writeFields_MPI</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fileName</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtypeIdx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algo</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nSteps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nVar</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gridSizes</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/helpers/fieldsIO.html#writeFields_MPI"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#helpers.fieldsIO.writeFields_MPI" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">helpers.fieldsIO module</a><ul>
<li><a class="reference internal" href="#helpers.fieldsIO.FieldsIO"><code class="docutils literal notranslate"><span class="pre">FieldsIO</span></code></a><ul>
<li><a class="reference internal" href="#helpers.fieldsIO.FieldsIO.ALLOW_OVERWRITE"><code class="docutils literal notranslate"><span class="pre">ALLOW_OVERWRITE</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.FieldsIO.STRUCTS"><code class="docutils literal notranslate"><span class="pre">STRUCTS</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.FieldsIO.addField"><code class="docutils literal notranslate"><span class="pre">addField()</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.FieldsIO.fSize"><code class="docutils literal notranslate"><span class="pre">fSize</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.FieldsIO.fileSize"><code class="docutils literal notranslate"><span class="pre">fileSize</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.FieldsIO.formatIndex"><code class="docutils literal notranslate"><span class="pre">formatIndex()</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.FieldsIO.fromFile"><code class="docutils literal notranslate"><span class="pre">fromFile()</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.FieldsIO.hBase"><code class="docutils literal notranslate"><span class="pre">hBase</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.FieldsIO.hInfos"><code class="docutils literal notranslate"><span class="pre">hInfos</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.FieldsIO.hSize"><code class="docutils literal notranslate"><span class="pre">hSize</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.FieldsIO.initialize"><code class="docutils literal notranslate"><span class="pre">initialize()</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.FieldsIO.itemSize"><code class="docutils literal notranslate"><span class="pre">itemSize</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.FieldsIO.nFields"><code class="docutils literal notranslate"><span class="pre">nFields</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.FieldsIO.readField"><code class="docutils literal notranslate"><span class="pre">readField()</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.FieldsIO.readHeader"><code class="docutils literal notranslate"><span class="pre">readHeader()</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.FieldsIO.register"><code class="docutils literal notranslate"><span class="pre">register()</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.FieldsIO.reshape"><code class="docutils literal notranslate"><span class="pre">reshape()</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.FieldsIO.sID"><code class="docutils literal notranslate"><span class="pre">sID</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.FieldsIO.setHeader"><code class="docutils literal notranslate"><span class="pre">setHeader()</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.FieldsIO.tSize"><code class="docutils literal notranslate"><span class="pre">tSize</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.FieldsIO.time"><code class="docutils literal notranslate"><span class="pre">time()</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.FieldsIO.times"><code class="docutils literal notranslate"><span class="pre">times</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#helpers.fieldsIO.Rectilinear"><code class="docutils literal notranslate"><span class="pre">Rectilinear</span></code></a><ul>
<li><a class="reference internal" href="#helpers.fieldsIO.Rectilinear.MPI_FILE_CLOSE"><code class="docutils literal notranslate"><span class="pre">MPI_FILE_CLOSE()</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.Rectilinear.MPI_FILE_OPEN"><code class="docutils literal notranslate"><span class="pre">MPI_FILE_OPEN()</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.Rectilinear.MPI_ON"><code class="docutils literal notranslate"><span class="pre">MPI_ON</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.Rectilinear.MPI_READ_AT_ALL"><code class="docutils literal notranslate"><span class="pre">MPI_READ_AT_ALL()</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.Rectilinear.MPI_ROOT"><code class="docutils literal notranslate"><span class="pre">MPI_ROOT</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.Rectilinear.MPI_WRITE"><code class="docutils literal notranslate"><span class="pre">MPI_WRITE()</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.Rectilinear.MPI_WRITE_AT_ALL"><code class="docutils literal notranslate"><span class="pre">MPI_WRITE_AT_ALL()</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.Rectilinear.addField"><code class="docutils literal notranslate"><span class="pre">addField()</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.Rectilinear.comm"><code class="docutils literal notranslate"><span class="pre">comm</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.Rectilinear.dim"><code class="docutils literal notranslate"><span class="pre">dim</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.Rectilinear.gridSizes"><code class="docutils literal notranslate"><span class="pre">gridSizes</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.Rectilinear.hInfos"><code class="docutils literal notranslate"><span class="pre">hInfos</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.Rectilinear.iPos"><code class="docutils literal notranslate"><span class="pre">iPos()</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.Rectilinear.initialize"><code class="docutils literal notranslate"><span class="pre">initialize()</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.Rectilinear.nCollectiveIO"><code class="docutils literal notranslate"><span class="pre">nCollectiveIO</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.Rectilinear.nDoF"><code class="docutils literal notranslate"><span class="pre">nDoF</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.Rectilinear.readField"><code class="docutils literal notranslate"><span class="pre">readField()</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.Rectilinear.readHeader"><code class="docutils literal notranslate"><span class="pre">readHeader()</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.Rectilinear.reshape"><code class="docutils literal notranslate"><span class="pre">reshape()</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.Rectilinear.sID"><code class="docutils literal notranslate"><span class="pre">sID</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.Rectilinear.setHeader"><code class="docutils literal notranslate"><span class="pre">setHeader()</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.Rectilinear.setupCoords"><code class="docutils literal notranslate"><span class="pre">setupCoords()</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.Rectilinear.setupMPI"><code class="docutils literal notranslate"><span class="pre">setupMPI()</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.Rectilinear.toVTR"><code class="docutils literal notranslate"><span class="pre">toVTR()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#helpers.fieldsIO.Scalar"><code class="docutils literal notranslate"><span class="pre">Scalar</span></code></a><ul>
<li><a class="reference internal" href="#helpers.fieldsIO.Scalar.hInfos"><code class="docutils literal notranslate"><span class="pre">hInfos</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.Scalar.nVar"><code class="docutils literal notranslate"><span class="pre">nVar</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.Scalar.readHeader"><code class="docutils literal notranslate"><span class="pre">readHeader()</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.Scalar.sID"><code class="docutils literal notranslate"><span class="pre">sID</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.Scalar.setHeader"><code class="docutils literal notranslate"><span class="pre">setHeader()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#helpers.fieldsIO.compareFields_MPI"><code class="docutils literal notranslate"><span class="pre">compareFields_MPI()</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.initGrid"><code class="docutils literal notranslate"><span class="pre">initGrid()</span></code></a></li>
<li><a class="reference internal" href="#helpers.fieldsIO.writeFields_MPI"><code class="docutils literal notranslate"><span class="pre">writeFields_MPI()</span></code></a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="helpers.blocks.html"
                          title="previous chapter">helpers.blocks module</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="helpers.firedrake_ensemble_communicator.html"
                          title="next chapter">helpers.firedrake_ensemble_communicator module</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/pySDC/helpers.fieldsIO.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="helpers.firedrake_ensemble_communicator.html" title="helpers.firedrake_ensemble_communicator module"
             >next</a> |</li>
        <li class="right" >
          <a href="helpers.blocks.html" title="helpers.blocks module"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">pySDC 5.6 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="helpers.html" >helpers package</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">helpers.fieldsIO module</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2024, Robert Speck.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    </div>
  </body>
</html>