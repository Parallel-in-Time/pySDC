<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>implementations.convergence_controller_classes.adaptive_collocation module &#8212; pySDC 5.3.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b76e3c8a" />
    <link rel="stylesheet" type="text/css" href="../_static/classic.css?v=89b800e6" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=c40552b6" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=7e71ce01"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="implementations.convergence_controller_classes.adaptivity module" href="implementations.convergence_controller_classes.adaptivity.html" />
    <link rel="prev" title="implementations.convergence_controller_classes package" href="implementations.convergence_controller_classes.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="implementations.convergence_controller_classes.adaptivity.html" title="implementations.convergence_controller_classes.adaptivity module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="implementations.convergence_controller_classes.html" title="implementations.convergence_controller_classes package"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">pySDC 5.3.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="implementations.html" >implementations package</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="implementations.convergence_controller_classes.html" accesskey="U">implementations.convergence_controller_classes package</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">implementations.convergence_controller_classes.adaptive_collocation module</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="module-implementations.convergence_controller_classes.adaptive_collocation">
<span id="implementations-convergence-controller-classes-adaptive-collocation-module"></span><h1>implementations.convergence_controller_classes.adaptive_collocation module<a class="headerlink" href="#module-implementations.convergence_controller_classes.adaptive_collocation" title="Permalink to this heading">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="implementations.convergence_controller_classes.adaptive_collocation.AdaptiveCollocation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">AdaptiveCollocation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">controller</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/implementations/convergence_controller_classes/adaptive_collocation.html#AdaptiveCollocation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#implementations.convergence_controller_classes.adaptive_collocation.AdaptiveCollocation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ConvergenceController</span></code></p>
<p>This convergence controller allows to change the underlying quadrature between iterations.</p>
<p>Supplying multiple quadrature rules will result in a change to a new quadrature whenever the previous one is
converged until all methods given are converged, at which point the step is ended.
Whenever the quadrature is changed, the solution is interpolated from the old nodes to the new nodes to ensure
accelerated convergence compared to starting from the initial conditions.</p>
<p>Use this convergence controller by supplying parameters that the sweeper accepts as a list to the <cite>params</cite>.
For instance, supplying
<a href="#id1"><span class="problematic" id="id2">``</span></a>`
params = {</p>
<blockquote>
<div><p>‘num_nodes’: [2, 3],</p>
</div></blockquote>
<section id="id3">
<h2>}<a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h2>
<p>will use collocation methods like you passed to the <cite>sweeper_params</cite> in the <cite>description</cite> object, but will change
the number of nodes to 2 before the first iteration and to 3 as soon as the 2-node collocation problem is converged.
This will override whatever you set for the number of nodes in the <cite>sweeper_params</cite>, but you still need to set
something to allow instantiation of the levels before this convergence controller becomes active.
Make sure all lists you supply here have the same length.</p>
<p>Feel free to set <cite>logger_level = 15</cite> in the controller parameters to get comprehensive text output on what exactly
is happening.</p>
<dl class="simple">
<dt>This convergence controller has various applications.</dt><dd><ul class="simple">
<li><p>You could try to obtain speedup by doing some inexactness. It is currently possible to set various residual
tolerances, which will be passed to the levels, corresponding to the accuracy with which each collocation problem
is solved.</p></li>
<li><p>You can compute multiple solutions to the same initial value problem with different order. This allows, for
instance, to do adaptive time stepping.</p></li>
</ul>
</dd>
</dl>
<p>When trying to obtain speedup with this, be ware that the interpolation is not for free. In particular, it is
necessary to reevaluate the right hand side at all nodes afterwards.</p>
<dl class="py method">
<dt class="sig sig-object py" id="implementations.convergence_controller_classes.adaptive_collocation.AdaptiveCollocation.check_parameters">
<span class="sig-name descname"><span class="pre">check_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">controller</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/implementations/convergence_controller_classes/adaptive_collocation.html#AdaptiveCollocation.check_parameters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#implementations.convergence_controller_classes.adaptive_collocation.AdaptiveCollocation.check_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if we allow the scheme to solve the collocation problems to convergence.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>controller</strong> (<em>pySDC.Controller</em>) – The controller</p></li>
<li><p><strong>params</strong> (<em>dict</em>) – The params passed for this specific convergence controller</p></li>
<li><p><strong>description</strong> (<em>dict</em>) – The description object used to instantiate the controller</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Whether the parameters are compatible
str: The error message</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="implementations.convergence_controller_classes.adaptive_collocation.AdaptiveCollocation.post_iteration_processing">
<span class="sig-name descname"><span class="pre">post_iteration_processing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">controller</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">S</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/implementations/convergence_controller_classes/adaptive_collocation.html#AdaptiveCollocation.post_iteration_processing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#implementations.convergence_controller_classes.adaptive_collocation.AdaptiveCollocation.post_iteration_processing" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch to the next collocation method if the current one is converged.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>controller</strong> (<em>pySDC.Controller.controller</em>) – The controller</p></li>
<li><p><strong>S</strong> (<em>pySDC.Step.step</em>) – The current step</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="implementations.convergence_controller_classes.adaptive_collocation.AdaptiveCollocation.post_spread_processing">
<span class="sig-name descname"><span class="pre">post_spread_processing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">controller</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">S</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/implementations/convergence_controller_classes/adaptive_collocation.html#AdaptiveCollocation.post_spread_processing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#implementations.convergence_controller_classes.adaptive_collocation.AdaptiveCollocation.post_spread_processing" title="Permalink to this definition">¶</a></dt>
<dd><p>Overwrite the sweeper parameters with the first collocation parameters set up here.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>controller</strong> (<em>pySDC.Controller.controller</em>) – The controller</p></li>
<li><p><strong>S</strong> (<em>pySDC.Step.step</em>) – The current step</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="implementations.convergence_controller_classes.adaptive_collocation.AdaptiveCollocation.reset_status_variables">
<span class="sig-name descname"><span class="pre">reset_status_variables</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">controller</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/implementations/convergence_controller_classes/adaptive_collocation.html#AdaptiveCollocation.reset_status_variables"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#implementations.convergence_controller_classes.adaptive_collocation.AdaptiveCollocation.reset_status_variables" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the status variables between time steps.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>controller</strong> (<em>pySDC.Controller.controller</em>) – The controller</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="implementations.convergence_controller_classes.adaptive_collocation.AdaptiveCollocation.setup">
<span class="sig-name descname"><span class="pre">setup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">controller</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/implementations/convergence_controller_classes/adaptive_collocation.html#AdaptiveCollocation.setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#implementations.convergence_controller_classes.adaptive_collocation.AdaptiveCollocation.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Record what variables we want to vary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>controller</strong> (<em>pySDC.Controller.controller</em>) – The controller</p></li>
<li><p><strong>params</strong> (<em>dict</em>) – The params passed for this specific convergence controller</p></li>
<li><p><strong>description</strong> (<em>dict</em>) – The description object used to instantiate the controller</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The updated params dictionary</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>(dict)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="implementations.convergence_controller_classes.adaptive_collocation.AdaptiveCollocation.setup_status_variables">
<span class="sig-name descname"><span class="pre">setup_status_variables</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">controller</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/implementations/convergence_controller_classes/adaptive_collocation.html#AdaptiveCollocation.setup_status_variables"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#implementations.convergence_controller_classes.adaptive_collocation.AdaptiveCollocation.setup_status_variables" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an index for which collocation method to use.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>controller</strong> (<em>pySDC.Controller.controller</em>) – The controller</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="implementations.convergence_controller_classes.adaptive_collocation.AdaptiveCollocation.switch_sweeper">
<span class="sig-name descname"><span class="pre">switch_sweeper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">S</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/implementations/convergence_controller_classes/adaptive_collocation.html#AdaptiveCollocation.switch_sweeper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#implementations.convergence_controller_classes.adaptive_collocation.AdaptiveCollocation.switch_sweeper" title="Permalink to this definition">¶</a></dt>
<dd><p>Update to the next sweeper in line.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>S</strong> (<em>pySDC.Step.step</em>) – The current step</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</section>
</dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">implementations.convergence_controller_classes.adaptive_collocation module</a><ul>
<li><a class="reference internal" href="#implementations.convergence_controller_classes.adaptive_collocation.AdaptiveCollocation"><code class="docutils literal notranslate"><span class="pre">AdaptiveCollocation</span></code></a><ul>
<li><a class="reference internal" href="#implementations.convergence_controller_classes.adaptive_collocation.AdaptiveCollocation.check_parameters"><code class="docutils literal notranslate"><span class="pre">check_parameters()</span></code></a></li>
<li><a class="reference internal" href="#implementations.convergence_controller_classes.adaptive_collocation.AdaptiveCollocation.post_iteration_processing"><code class="docutils literal notranslate"><span class="pre">post_iteration_processing()</span></code></a></li>
<li><a class="reference internal" href="#implementations.convergence_controller_classes.adaptive_collocation.AdaptiveCollocation.post_spread_processing"><code class="docutils literal notranslate"><span class="pre">post_spread_processing()</span></code></a></li>
<li><a class="reference internal" href="#implementations.convergence_controller_classes.adaptive_collocation.AdaptiveCollocation.reset_status_variables"><code class="docutils literal notranslate"><span class="pre">reset_status_variables()</span></code></a></li>
<li><a class="reference internal" href="#implementations.convergence_controller_classes.adaptive_collocation.AdaptiveCollocation.setup"><code class="docutils literal notranslate"><span class="pre">setup()</span></code></a></li>
<li><a class="reference internal" href="#implementations.convergence_controller_classes.adaptive_collocation.AdaptiveCollocation.setup_status_variables"><code class="docutils literal notranslate"><span class="pre">setup_status_variables()</span></code></a></li>
<li><a class="reference internal" href="#implementations.convergence_controller_classes.adaptive_collocation.AdaptiveCollocation.switch_sweeper"><code class="docutils literal notranslate"><span class="pre">switch_sweeper()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="implementations.convergence_controller_classes.html"
                          title="previous chapter">implementations.convergence_controller_classes package</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="implementations.convergence_controller_classes.adaptivity.html"
                          title="next chapter">implementations.convergence_controller_classes.adaptivity module</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/pySDC/implementations.convergence_controller_classes.adaptive_collocation.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="implementations.convergence_controller_classes.adaptivity.html" title="implementations.convergence_controller_classes.adaptivity module"
             >next</a> |</li>
        <li class="right" >
          <a href="implementations.convergence_controller_classes.html" title="implementations.convergence_controller_classes package"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">pySDC 5.3.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="implementations.html" >implementations package</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="implementations.convergence_controller_classes.html" >implementations.convergence_controller_classes package</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">implementations.convergence_controller_classes.adaptive_collocation module</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2023, Robert Speck.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.1.2.
    </div>
  </body>
</html>